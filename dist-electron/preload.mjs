"use strict";const r=require("electron"),t={showSaveDialog:async e=>{try{return await r.ipcRenderer.invoke("show-save-dialog",e||{})}catch(n){return console.error("Failed to show save dialog:",n),{canceled:!0,filePath:null,error:n instanceof Error?n.message:"Unknown error"}}},startDownload:async(e,n,a)=>{try{return await r.ipcRenderer.invoke("start-download",{url:e,savePath:n,metadata:a})}catch(o){return console.error("Failed to start download:",o),{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},getHistory:async()=>await r.ipcRenderer.invoke("get-download-history"),saveRecord:async e=>await r.ipcRenderer.invoke("save-download-record",e),getSettings:async()=>await r.ipcRenderer.invoke("get-settings"),updateSettings:async(e,n)=>{await r.ipcRenderer.invoke("set-setting",{key:e,value:n})},selectDirectory:async()=>await r.ipcRenderer.invoke("select-directory"),onDownloadProgress:e=>{const n=(a,o)=>{e(o)};return r.ipcRenderer.on("download-progress",n),()=>{r.ipcRenderer.removeListener("download-progress",n)}},onDownloadComplete:e=>{const n=(a,o)=>{e(o)};return r.ipcRenderer.on("download-complete",n),()=>{r.ipcRenderer.removeListener("download-complete",n)}},onDownloadError:e=>{const n=(a,o)=>{e(o)};return r.ipcRenderer.on("download-error",n),()=>{r.ipcRenderer.removeListener("download-error",n)}},removeAllDownloadListeners:()=>{r.ipcRenderer.removeAllListeners("download-progress"),r.ipcRenderer.removeAllListeners("download-complete"),r.ipcRenderer.removeAllListeners("download-error")},cancelDownload:async e=>await r.ipcRenderer.invoke("cancel-download",{url:e}),pauseDownload:async e=>await r.ipcRenderer.invoke("pause-download",{url:e}),bulkInsertEpisodes:async e=>await r.ipcRenderer.invoke("bulk-insert-episodes",e),setMaxSpeed:async e=>{await r.ipcRenderer.invoke("set-max-speed",e)},searchSources:async e=>await r.ipcRenderer.invoke("search-sources",e),getSeasonLinks:async(e,n)=>await r.ipcRenderer.invoke("get-season-links",{sourceId:e,seriesId:n}),getEpisodes:async(e,n,a)=>await r.ipcRenderer.invoke("get-episodes",{sourceId:e,seriesId:n,seasonNumber:a}),getSourceDownloadUrl:async(e,n)=>await r.ipcRenderer.invoke("get-source-download-url",{sourceId:e,episodeId:n}),playFile:async e=>await r.ipcRenderer.invoke("play-file",e),getPlaybackPosition:async e=>await r.ipcRenderer.invoke("get-playback-position",e),updatePlaybackPosition:async e=>await r.ipcRenderer.invoke("update-playback-position",e),onUpdateReady:e=>{const n=(a,o)=>{e(o)};return r.ipcRenderer.on("update-ready",n),()=>{r.ipcRenderer.removeListener("update-ready",n)}}};r.contextBridge.exposeInMainWorld("electronAPI",t);
